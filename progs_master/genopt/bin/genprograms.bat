#
# genprograms.bat - performs a make on the source files generated by
# GENOPT.  This shell file is typically executed by the GENOPT user.

echo ""
echo "The purpose of genprograms is to generate the executables from the"
echo "source files created/modified by the GENOPT user."
echo ""

make -f ${GENOPT}/execute/usermake.${MACHINE} |& tee usermake.log genoptcase
set stat = $status

echo ""
if ($stat:q != "0") then
  echo "Correct the errors in your code so that your program compiles"
  echo "and links successfully.  If you find that there is a bug in"
  echo "the fixed code, you will have to contact the developer."
  echo ""
  exit 99
else
  echo "Congratulations!  Your code compiled successfully.  You should"
  echo "now check to make sure that you get correct results from a"
  echo "simple test case with a known answer before attempting a more"
  echo "complicated case."
endif


echo ""
echo "Here is a list of all your newly created executables:"

foreach file (*)
  if ($file =~ *.${MACHINE} && -f $file && -x $file) then
    /bin/ls -lt $file
  endif
end

echo ""
echo "Next, type the command BEGIN to input data for a new case."
echo ""

